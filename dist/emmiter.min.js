!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Emmiter=e()}}(function(){return function e(t,n,r){function o(s,u){if(!n[s]){if(!t[s]){var f="function"==typeof require&&require;if(!u&&f)return f(s,!0);if(i)return i(s,!0);var p=new Error("Cannot find module '"+s+"'");throw p.code="MODULE_NOT_FOUND",p}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===o.call(e)},s=function(e){if(!e||"[object Object]"!==o.call(e))return!1;var t=r.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!n)return!1;var i;for(i in e);return"undefined"==typeof i||r.call(e,i)};t.exports=function u(){var e,t,n,r,o,f,p=arguments[0],c=1,l=arguments.length,a=!1;for("boolean"==typeof p?(a=p,p=arguments[1]||{},c=2):("object"!=typeof p&&"function"!=typeof p||null==p)&&(p={});l>c;++c)if(e=arguments[c],null!=e)for(t in e)n=p[t],r=e[t],p!==r&&(a&&r&&(s(r)||(o=i(r)))?(o?(o=!1,f=n&&i(n)?n:[]):f=n&&s(n)?n:{},p[t]=u(a,f,r)):"undefined"!=typeof r&&(p[t]=r));return p}},{}],2:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],3:[function(e,t,n){var r=function(e){var t={};return e&&"[object Function]"===t.toString.call(e)};"undefined"!=typeof t&&t.exports&&(t.exports=r)},{}],4:[function(e,t,n){"use strict";var r=e("isarray");t.exports=function(e){return null!=e&&"object"==typeof e&&!r(e)}},{isarray:5}],5:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],6:[function(e,t,n){t.exports=function(e,t,n){var r=[],o=e.length;if(0===o)return r;var i=0>t?Math.max(0,t+o):t||0;for(void 0!==n&&(o=0>n?n+o:n);o-- >i;)r[o-i]=e[o];return r}},{}],emmiter:[function(e,t,n){"use strict";var r=e("sliced"),o=e("extend"),i=e("isobject"),s=e("isarray"),u=e("isfunction"),f=function(e){return"undefined"==typeof e};Array.prototype.some||(Array.prototype.some=function(e){if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;for(var t=Object(this),n=t.length>>>0,r=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)if(o in t&&e.call(r,t[o],o,t))return!0;return!1});var p=function(e,t){if("string"!=typeof e||!e)throw Error("event should be string!");if(2===arguments.length&&"function"!=typeof t)throw Error("callback should be function!")},c=function l(){return this instanceof l?this:new l};c.prototype.NS_SEPARATOR=function(e){return function(t){return"undefined"!=typeof t&&(e=t),e}}("."),c.prototype._isListener=function(e){return!f(e.event)&&!f(e.ns)&&!f(e.fn)},c.prototype._parseEventName=function(e){var t,n=null;return i(e)&&"undefined"!=typeof e.name&&"undefined"!=typeof e.ns?n=e:(t=e.split(this.NS_SEPARATOR()),n={name:t[0]||"",ns:t[1]||""}),n},c.prototype._buildEventName=function(e){return e=this._parseEventName(e),e.ns?[e.name,e.ns].join(this.NS_SEPARATOR()):e.name},c.prototype.getListeners=function(e,t,n){for(var r,o=arguments.length,i=r=new Array(o);o--;i[o]=arguments[o]);this.listeners=this.listeners||[],r.length<2?(t=null,n=!1):2==r.length?u(r[1])?(t=r[1],n=!1):(t=null,n=!!n):3==r.length&&(t=u(t)?t:null,n=!!n);var s=[],f=[],p=this.listeners;return(e||t)&&(s=this._parseListeners(e,t),f=p.filter(function(e){var r=s.some(function(n){return!(n.event&&n.event!=e.event||n.ns&&n.ns!=e.ns||u(t)&&t!=e.fn)});return n?!r:r}),p=f),p},c.prototype._parseListeners=function(e,t){t=u(t)?t:null;var n=[],r=this;if(i(e))if(this._isListener(e))n.push(e);else for(var o in e)e.hasOwnProperty(o)&&(t=e[o],n=n.concat(this._parseListeners(o,t)));else s(e)?e.forEach(function(e){n=n.concat(r._parseListeners(e,t))}):"string"==typeof e?(e=e.split(" "),e.length>1?n=n.concat(this._parseListeners(e,t)):(o=this._parseEventName(e[0]),n.push({event:o.name,ns:o.ns,fn:t}))):t&&n.push({event:"",ns:"",fn:t});return n},c.prototype.addListener=c.prototype.bind=c.prototype.on=function(e,t){return t=u(t)?t:null,this.listeners=this.getListeners().concat(this._parseListeners(e,t)),this},c.prototype.once=c.prototype.one=function(e,t){p(e,t);var n=this;return n.on(e,function r(){t(),n.off(e,r)}),this},c.prototype.removeListener=c.prototype.unbind=c.prototype.off=function(e,t){return t=u(t)?t:null,this.listeners=this.getListeners(e,t,!0),this},c.prototype.trigger=c.prototype.emit=function(e,t){for(var n,o=this,i=[],s=arguments.length,u=n=new Array(s);s--;u[s]=arguments[s]);return n=r(n,1),this.getListeners(e).forEach(function(e){i.push(e.fn.apply(o,n))}),this._returnListenersResults?i:this},c.prototype.returnListenersResults=function(e){this._returnListenersResults=!!e},c.extend=c.patch=function(e){return o(e,new c,c.prototype)},c.create=function(){return new c},c.destroy=function(e){delete e.NS_SEPARATOR,delete e._isListener,delete e._parseEventName,delete e._buildEventName,delete e.getListeners,delete e._parseListeners,delete e.on,delete e.bind,delete e.addListener,delete e.one,delete e.once,delete e.off,delete e.unbind,delete e.removeListener,delete e.emit,delete e.trigger,delete e.returnListenersResults},t.exports=c},{extend:1,isarray:2,isfunction:3,isobject:4,sliced:6}]},{},["emmiter"])("emmiter")});
