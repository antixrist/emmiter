!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Emmiter=t()}}(function(){return function t(e,n,r){function o(s,u){if(!n[s]){if(!e[s]){var f="function"==typeof require&&require;if(!u&&f)return f(s,!0);if(i)return i(s,!0);var p=new Error("Cannot find module '"+s+"'");throw p.code="MODULE_NOT_FOUND",p}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===o.call(t)},s=function(t){if(!t||"[object Object]"!==o.call(t))return!1;var e=r.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!n)return!1;var i;for(i in t);return"undefined"==typeof i||r.call(t,i)};e.exports=function u(){var t,e,n,r,o,f,p=arguments[0],c=1,a=arguments.length,l=!1;for("boolean"==typeof p?(l=p,p=arguments[1]||{},c=2):("object"!=typeof p&&"function"!=typeof p||null==p)&&(p={});a>c;++c)if(t=arguments[c],null!=t)for(e in t)n=p[e],r=t[e],p!==r&&(l&&r&&(s(r)||(o=i(r)))?(o?(o=!1,f=n&&i(n)?n:[]):f=n&&s(n)?n:{},p[e]=u(l,f,r)):"undefined"!=typeof r&&(p[e]=r));return p}},{}],2:[function(t,e,n){var r={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],3:[function(t,e,n){var r=function(t){var e={};return t&&"[object Function]"===e.toString.call(t)};"undefined"!=typeof e&&e.exports&&(e.exports=r)},{}],4:[function(t,e,n){"use strict";var r=t("isarray");e.exports=function(t){return null!=t&&"object"==typeof t&&!r(t)}},{isarray:5}],5:[function(t,e,n){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],6:[function(t,e,n){e.exports=function(t,e,n){var r=[],o=t.length;if(0===o)return r;var i=0>e?Math.max(0,e+o):e||0;for(void 0!==n&&(o=0>n?n+o:n);o-- >i;)r[o-i]=t[o];return r}},{}],emmiter:[function(t,e,n){"use strict";var r=t("sliced"),o=t("extend"),i=t("isobject"),s=t("isarray"),u=t("isfunction"),f=function(t){return"undefined"==typeof t};Array.prototype.some||(Array.prototype.some=function(t){if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof t)throw new TypeError;for(var e=Object(this),n=e.length>>>0,r=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)if(o in e&&t.call(r,e[o],o,e))return!0;return!1});var p=function(t,e){if("string"!=typeof t||!t)throw Error("event should be string!");if(2===arguments.length&&"function"!=typeof e)throw Error("callback should be function!")},c=function a(){return this instanceof a?this:new a};c.prototype.NS_SEPARATOR=function(t){return function(e){return"undefined"!=typeof e&&(t=e),t}}("."),c.prototype._isListener=function(t){return!f(t.event)&&!f(t.ns)&&!f(t.fn)},c.prototype._parseEventName=function(t){var e,n=null;return i(t)&&"undefined"!=typeof t.name&&"undefined"!=typeof t.ns?n=t:(e=t.split(this.NS_SEPARATOR()),n={name:e[0]||"",ns:e[1]||""}),n},c.prototype._buildEventName=function(t){return t=this._parseEventName(t),t.ns?[t.name,t.ns].join(this.NS_SEPARATOR()):t.name},c.prototype.getListeners=function(t,e,n){var o=r(arguments);this.listeners=this.listeners||[],o.length<2?(e=null,n=!1):2==o.length?u(o[1])?(e=o[1],n=!1):(e=null,n=!!n):3==o.length&&(e=u(e)?e:null,n=!!n);var i=[],s=[],f=this.listeners;return(t||e)&&(i=this._parseListeners(t,e),s=f.filter(function(t){var r=i.some(function(n){return!(n.event&&n.event!=t.event||n.ns&&n.ns!=t.ns||u(e)&&e!=t.fn)});return n?!r:r}),f=s),f},c.prototype._parseListeners=function(t,e){e=u(e)?e:null;var n=[],r=this;if(i(t))if(this._isListener(t))n.push(t);else for(var o in t)t.hasOwnProperty(o)&&(e=t[o],n=n.concat(this._parseListeners(o,e)));else s(t)?t.forEach(function(t){n=n.concat(r._parseListeners(t,e))}):"string"==typeof t?(t=t.split(" "),t.length>1?n=n.concat(this._parseListeners(t,e)):(o=this._parseEventName(t[0]),n.push({event:o.name,ns:o.ns,fn:e}))):e&&n.push({event:"",ns:"",fn:e});return n},c.prototype.on=function(t,e){return e=u(e)?e:null,this.listeners=this.getListeners().concat(this._parseListeners(t,e)),this},c.prototype.bind=function(){return this.on.apply(this,arguments)},c.prototype.addListener=function(){return this.on.apply(this,arguments)},c.prototype.one=function(t,e){p(t,e);var n=this;return n.on(t,function r(){e(),n.off(t,r)}),this},c.prototype.once=function(){return this.one.apply(this,arguments)},c.prototype.off=function(t,e){return e=u(e)?e:null,this.listeners=this.getListeners(t,e,!0),this},c.prototype.unbind=function(){return this.off.apply(this,arguments)},c.prototype.removeListener=function(){return this.off.apply(this,arguments)},c.prototype.emit=function(t,e){var n=this,o=[];return e=r(arguments,1),this.getListeners(t).forEach(function(t){o.push(t.fn.apply(n,e))}),this._returnListenersResults?o:this},c.prototype.trigger=function(){return this.emit.apply(this,arguments)},c.prototype.returnListenersResults=function(t){this._returnListenersResults=!!t},c.patch=function(t){return o(t,new c,c.prototype)},c.extend=c.patch,c.create=function(){return new c},e.exports=c},{extend:1,isarray:2,isfunction:3,isobject:4,sliced:6}]},{},["emmiter"])("emmiter")});
